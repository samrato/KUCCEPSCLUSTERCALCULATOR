<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KUCCPS Cluster Point Calculator</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .header {
        background-color: #16174e;
        color: white;
        text-align: center;
        padding: 20px;
        width: 100%;
      }

      .header h1 {
        margin: 0;
        font-size: 2em;
      }

      .header p {
        margin-top: 10px;
        font-size: 1.1em;
      }

      .container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        max-width: 900px;
        width: 100%;
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 20px;
      }

      .calculator-section {
        flex: 1 1 60%;
        min-width: 300px;
      }

      .guide-section {
        flex: 1 1 30%;
        min-width: 250px;
      }

      h1 {
        text-align: center;
        color: #800000;
      }

      label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }

      input {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }

      button {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        background-color: #008000;
        color: white;
        font-size: 16px;
        cursor: pointer;
      }

      button:hover {
        background-color: #005700;
      }

      .grade-points {
        background-color: #f8f8f8;
        padding: 15px;
        border-radius: 5px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
      }

      th,
      td {
        padding: 10px;
        border: 1px solid #ddd;
        text-align: left;
      }

      th {
        background-color: #004680;
        color: white;
      }

      @media (max-width: 768px) {
        .container {
          flex-direction: column;
          align-items: center;
        }

        .calculator-section,
        .guide-section {
          flex: 1 1 100%;
          min-width: 100%;
        }

        .header h1 {
          font-size: 1.5em;
        }

        .header p {
          font-size: 1em;
        }
      }

      .result {
        margin-top: 15px;
        font-size: 18px;
        font-weight: bold;
        color: #800000;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>KUCCPS Cluster Point Calculator</h1>
      <p>2024/2025 Academic Year</p>
      <p>
        This system helps you calculate the average of your cluster points,
        enabling you to make informed decisions about your future career path
        based on your academic performance.
      </p>
    </div>

    <div class="container">
      <div class="calculator-section">
        <h1>Academic Grade Calculator</h1>
        <form id="calculator-form" onsubmit="return validateForm()">
          <label for="subject1">Subject 1 Points (max 12):</label>
          <input
            type="number"
            id="subject1"
            name="subject1"
            min="0"
            max="12"
            placeholder="Enter points (0-12)"
            required
          />

          <label for="subject2">Subject 2 Points (max 12):</label>
          <input
            type="number"
            id="subject2"
            name="subject2"
            min="0"
            max="12"
            placeholder="Enter points (0-12)"
            required
          />

          <label for="subject3">Subject 3 Points (max 12):</label>
          <input
            type="number"
            id="subject3"
            name="subject3"
            min="0"
            max="12"
            placeholder="Enter points (0-12)"
            required
          />

          <label for="subject4">Subject 4 Points (max 12):</label>
          <input
            type="number"
            id="subject4"
            name="subject4"
            min="0"
            max="12"
            placeholder="Enter points (0-12)"
            required
          />

          <label for="total">Total Points (max 84):</label>
          <input
            type="number"
            id="total"
            name="total"
            min="0"
            max="84"
            placeholder="Enter total points (0-84)"
            required
          />

          <label for="email">Email Address:</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="Enter your email address"
            required
          />

          <button type="submit">Calculate Results</button>
          <button
            type="reset"
            style="background-color: #d9534f; margin-left: 10px"
          >
            Reset
          </button>
        </form>

        <div id="result" class="result"></div>
      </div>

      <div class="guide-section">
        <h1>Grade Points Guide</h1>
        <div class="grade-points">
          <table>
            <thead>
              <tr>
                <th>Grade</th>
                <th>Points</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>A</td>
                <td>12</td>
              </tr>
              <tr>
                <td>A-</td>
                <td>11</td>
              </tr>
              <tr>
                <td>B+</td>
                <td>10</td>
              </tr>
              <tr>
                <td>B</td>
                <td>9</td>
              </tr>
              <tr>
                <td>B-</td>
                <td>8</td>
              </tr>
              <tr>
                <td>C+</td>
                <td>7</td>
              </tr>
              <tr>
                <td>C</td>
                <td>6</td>
              </tr>
              <tr>
                <td>C-</td>
                <td>5</td>
              </tr>
              <tr>
                <td>D+</td>
                <td>4</td>
              </tr>
              <tr>
                <td>D</td>
                <td>3</td>
              </tr>
              <tr>
                <td>D-</td>
                <td>2</td>
              </tr>
              <tr>
                <td>E</td>
                <td>1</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script>
      function calculateResults() {
        const subject1 =
          parseFloat(document.getElementById("subject1").value) || 0;
        const subject2 =
          parseFloat(document.getElementById("subject2").value) || 0;
        const subject3 =
          parseFloat(document.getElementById("subject3").value) || 0;
        const subject4 =
          parseFloat(document.getElementById("subject4").value) || 0;
        const total = parseFloat(document.getElementById("total").value) || 0;

        const r = subject1 + subject2 + subject3 + subject4;
        const m = 48;
        const api = total;
        const spi = 84;

        const w = Math.sqrt((r / m) * (api / spi)) * 48;
        document.getElementById(
          "result"
        ).textContent = `Weighted Cluster Point (w): ${w.toFixed(2)}`;
      }

      function validateForm() {
        const email = document.getElementById("email").value;
        const subject1 = document.getElementById("subject1").value;
        const subject2 = document.getElementById("subject2").value;
        const subject3 = document.getElementById("subject3").value;
        const subject4 = document.getElementById("subject4").value;
        const total = document.getElementById("total").value;

        if (
          !email ||
          !subject1 ||
          !subject2 ||
          !subject3 ||
          !subject4 ||
          !total
        ) {
          alert("Please fill in all the fields before submitting.");
          return false; // Prevent form submission
        }
        initiatePayment(); // Proceed with payment and calculation
        return false; // Prevent form submission
      }

      function initiatePayment() {
        const email = document.getElementById("email").value;

        const handler = PaystackPop.setup({
          key: "pk_live_4fd9484ec76df1b1c7d2b77a02393fd71c491c44", // Replace with your Paystack public key
          email: email,
          amount: 1500, // Amount in cents (e.g., 1500 = 15 Kenyan Shillings)
          currency: "KES", // Set to Kenyan Shillings
          onClose: function () {
            alert("Payment canceled");
          },
          callback: function (response) {
            alert("Payment successful! Transaction ref: " + response.reference);
            calculateResults();
          },
        });

        handler.openIframe();
      }
    </script>
  </body>
</html>
